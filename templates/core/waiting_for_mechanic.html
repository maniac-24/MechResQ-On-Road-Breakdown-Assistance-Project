{% extends 'base.html' %}
{% load static %}

{% block title %}Waiting for Mechanic Confirmation{% endblock %}

{% block content %}
<div class="d-flex justify-content-center align-items-center vh-100 bg-light">
  <div class="card shadow-lg text-center p-5 border-0 rounded-4" style="max-width: 420px;">
    <img src="{% static 'images/waiting.jpg' %}" alt="Waiting" class="mb-4 mx-auto" style="width: 120px;">
    
    <h3 class="text-primary fw-bold mb-3">Waiting for Mechanic Confirmation</h3>
    <div class="spinner-border text-primary mb-3" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="text-muted mb-2">Weâ€™ve notified your mechanic to confirm your cash payment.</p>
    <p class="small text-muted">This page will refresh automatically every 10 seconds.</p>

    <a href="{% url 'core:service_request_detail' service.id %}" class="text-decoration-none mt-3">
        <i class="fas fa-arrow-left me-1"></i> Cancel Payment
    </a>
  </div>
</div>

<script>
  // Auto-refresh every 10 seconds to check if the mechanic has confirmed payment
  setTimeout(() => {
      location.reload();
  }, 10000);
</script>
{% endblock %}
